Появился заказчик с задачей ПО под распберри для вендингового аппарата. Снековый аппарат, 32 мотора со спиралями (8 рядов, 4 полки).
Аппарат собран на raspberry pi и LTE+gps модуле, также к распберри подключен hdmi дисплей с тачскрином и видео-камера.
Распберри коннектится к серверу через модем, и получает json пакет от сервера, в котором содержится 6-значный код товара.
Получив пакет, распберри управляет по spi-интерфейсу драйвером коллекторных двигателей.
По spi от распберри к драйверу улетает 2 байта - координаты x,y товара для выдачи.
Драйвер двигателей принимает пакет от распберри, и через сдвиговые регистры управляет силовыми ключами, подающими питание на соответствующие моторы.
Выбранный двигатель начинает вращать спираль, выталкивая установленный на ней товар, до момента пролетания товара через инфракрасные датчики (ик-барьер).
ИК барьер подключен к микроконтроллеру, который выдает сигнал (GPIO) на распберри. Распберри, получив этот сигнал останавливает вращение двигателя через spi.
—
У клиента есть мобильное приложение, через которое он регистрируется и резервирует товар, получая при этом уникальный qr-код.
Находясь в непосредственной близости от терминала, клиент, используя тачскин выбирает пункт авторизации на дисплее, сканирует полученный через мобильное приложение qr-код камерой.
Распознование qr-кода происходит на сервере заказчика.
Клиент, дождавшись подтверждения авторизации от сервера заказчика, получает выбранный товар.

Кому интересно поучаствовать в проекте, получить базовый опыт разработки на любом участке этого проекта, или поделиться своим опытом с новичками, пишите.
